function Calendar(){var m=this,y,i,x,l,g,j,q,b,u,s,z,f,w,k,n=0,v="click",p="noAnimationEnd",t=Modernizr.csstransforms3d?"webkit moz o ms khtml ".split(" ").join("AnimationEnd ")+"animationEnd":p,c="startDate",h="endDate",a=function(A,B){B&&B.clearTime&&B.clearTime();if(A==c){b=B}else{u=B}e();y.attr("data-"+A.toLowerCase(),!B?"":B.toString());y.trigger(A+"Changed")},o=function(A){A.preventDefault();var C=$(this);if(C.hasClass("inactive")||(C.text().length==0)){return}var B=new Date(s.getFullYear(),s.getMonth(),parseInt(C.text()));if(k){a(c,B);return}if(!b){if(!u){a(c,B)}else{if(B<u){a(c,B)}else{if(u<B){a(c,u);a(h,B)}else{a(h,null)}}}}else{if(!u){if(b<B){a(h,B)}else{if(B<b){a(h,b);a(c,B)}else{a(c,null)}}}else{if(C.hasClass(c)){a(c,null)}else{if(C.hasClass(h)){a(h,null)}else{a(c,null);a(h,null)}}}}},d=function(A){return(A+n)%7},e=function(){j.removeClass(c).removeClass(h).removeClass("betweenDates");var C=s.clone().moveToFirstDayOfMonth();var E=s.clone().moveToLastDayOfMonth();var B=d(C.getDay())-1;if(!!b&&!!u&&(b<E)&&(u>C)){var A=new Date(Math.max(C,b.clone().addDays(1)));var D=new Date(Math.min(E,u.clone().addDays(-1)));if(A<=D){j.slice(B+A.getDate(),B+D.getDate()+1).addClass("betweenDates")}}if(!!b&&(C<=b)&&(b<=E)){j.eq(B+b.getDate()).addClass(c)}if(!!u&&(C<=u)&&(u<=E)){j.eq(B+u.getDate()).addClass(h)}};m.ready=function(I){y=I;i=$('<a href="#">&lt;</a>');x=$('<a href="#">&gt;</a>');l=$('<li class="calMonth"></li>');y.append($('<ul class="calButtonBar"></ul>').append($('<li class="calPrevious"></li>').append(i)).append(l).append($('<li class="calNext"></li>').append(x)));for(var D=0,B="",C="";D<7;D++){B+="<th></th>";C+='<td><a href="#"></a></td>'}for(var D=0,F="";D<6;D++){F+="<tr>"+C+"</tr>"}y.append('<div class="calGrid"><table><thead><tr>'+B+"</tr></thead><tbody>"+F+"</tbody></table></div>");g=y.find("th");j=y.find("td a");q=y.find("tr");q.eq(1).addClass("first");k=y.attr("data-single_date")==="true"?true:false;n=y.attr("data-firstdayofweek")||n;y.get(0).calendar=m;if($.fn){$.fn.slice=$.fn.slice||function(K,J){return $([].slice.call(this,K,J))};$.fn.calendar=function(){return this.get(0).calendar}}z=(new Date()).clearTime();f=y.attr("data-mindate");f=f?new Date(f).clearTime():z;b=y.attr("data-startdate");b=b?new Date(b).clearTime():null;u=y.attr("data-enddate");u=u?new Date(u).clearTime():null;s=(b||z).clone();w=y.attr("data-localized_date");if(typeof w=="string"){w=JSON.parse(w)}var G=y.find(".calGrid");var E=[];var A=function(J){if(G.children().length>1){E.push(J);return true}return false};var H=function(){if(E.length>0){setTimeout(function(){E.shift().trigger(v)},0)}};i.bind(v,function(J){J.preventDefault();if(A(i)){return}s=s.addMonths(-1);var K=$("<table>"+y.find("table").html()+"</table>");G.append(K);j.closest("table").addClass("turndown").bind(t,function(L){$(this).removeClass("turndown").unbind(t);K.remove();H()}).trigger(p);m.showMonth(s)});x.bind(v,function(J){J.preventDefault();if(A(x)){return}s=s.addMonths(+1);var K=$('<table class="turnup">'+y.find("table").html()+"</table>");G.append(K);K.bind(t,function(L){K.remove();H()}).trigger(p);m.showMonth(s)});y.bind("resetDates",function(J){a(c,null);a(h,null)});j.bind(v,o);m.showMonth(s)};m.setDates=function(B,A){if(k){s=(B||z).clone();m.showMonth(s)}a(c,B&&A?new Date(Math.min(B,A)):B);!k&&a(h,B&&A?(B.getTime()!=A.getTime()?new Date(Math.max(B,A)):null):A)};m.showMonth=function(E){s=E;f=new Date(Math.max(f,z));var D=y.data("maxdate");var B=null;if(D){B=new Date(D).clearTime()}if(!!w){l.text(E.getFullYear()+"年"+w.months.names["long"][E.getMonth()]);for(var H=0,L=g.length;H<L;H++){g.eq(d(H)).text(w.days.names.min[H])}}var M=f>E.clone().moveToLastDayOfMonth();var I=!M&&(f>=E.clone().moveToFirstDayOfMonth());var G=f.getDate();j.addClass("noTransition").removeClass("inactive");q.removeClass("last").removeClass("hidden");for(var A=d(E.clone().moveToFirstDayOfMonth().getDay())-1,K=A+E.clone().moveToLastDayOfMonth().getDate(),H=0,L=j.length;H<L;H++){var J=(H>A)&&(H<=K);var F=j.eq(H).text(J?(""+(H-A)):"");if(J&&(M||(I&&(H-A<G)))){F.addClass("inactive")}var C=E.clone().moveToFirstDayOfMonth().addDays(H-A);if(B&&(C.getTime()>B.getTime())){F.addClass("inactive")}if(I&&z.getDate()==(H-A)){F.addClass("today")}if(H==K){F.closest("tr").addClass("last").next().addClass("hidden").next().addClass("hidden")}}setTimeout(function(){j.removeClass("noTransition")},0);e()}}window.Modernizr=function(ap,ao,an){function O(){}function Q(f,e){var h=f.charAt(0).toUpperCase()+f.substr(1),g=(f+" "+Z.join(h+" ")+h).split(" ");return !!S(g,e)}function S(e,c){for(var f in e){if(af[e[f]]!==an&&(!c||c(e[f],ag))){return !0}}}function U(d,c){return(""+d).indexOf(c)!==-1}function W(d,c){return typeof d===c}function Y(d,c){return aa(ab.join(d+";")+(c||""))}function aa(b){af.cssText=b}var am="1.7",al={},ak=!0,aj=ao.documentElement,ai=ao.head||ao.getElementsByTagName("head")[0],ah="modernizr",ag=ao.createElement(ah),af=ag.style,ae=ao.createElement("input"),ad=":)",ac=Object.prototype.toString,ab=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),Z="Webkit Moz O ms Khtml".split(" "),X={svg:"http://www.w3.org/2000/svg"},V={},T={},R={},P=[],N,M=function(b){var h=ao.createElement("style"),g=ao.createElement("div"),f;h.textContent=b+"{#modernizr{height:3px}}",ai.appendChild(h),g.id="modernizr",aj.appendChild(g),f=g.offsetHeight===3,h.parentNode.removeChild(h),g.parentNode.removeChild(g);return !!f},K=function(){function c(h,g){g=g||ao.createElement(b[h]||"div");var a=(h="on"+h) in g;a||(g.setAttribute||(g=ao.createElement("div")),g.setAttribute&&g.removeAttribute&&(g.setAttribute(h,""),a=W(g[h],"function"),W(g[h],an)||(g[h]=an),g.removeAttribute(h))),g=null;return a}var b={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return c}(),J=({}).hasOwnProperty,I;W(J,an)||W(J.call,an)?I=function(d,c){return c in d&&W(d.constructor.prototype[c],an)}:I=function(d,c){return J.call(d,c)},V.touch=function(){return"ontouchstart" in ap||M("@media ("+ab.join("touch-enabled),(")+"modernizr)")},V.csstransforms3d=function(){var b=!!S(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);b&&"webkitPerspective" in aj.style&&(b=M("@media ("+ab.join("transform-3d),(")+"modernizr)"));return b};for(var L in V){I(V,L)&&(N=L.toLowerCase(),al[N]=V[L](),P.push((al[N]?"":"no-")+N))}al.input||O(),al.crosswindowmessaging=al.postmessage,al.historymanagement=al.history,al.addTest=function(d,c){d=d.toLowerCase();if(!al[d]){c=!!c(),aj.className+=" "+(c?"":"no-")+d,al[d]=c;return al}},aa(""),ag=ae=null,al._enableHTML5=ak,al._version=am,aj.className=aj.className.replace(/\bno-js\b/,"")+" js "+P.join(" ");return al}(this,this.document);Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};Date.getMonthNumberFromName=function(f){var h=Date.CultureInfo.monthNames,g=Date.CultureInfo.abbreviatedMonthNames,i=f.toLowerCase();for(var j=0;j<h.length;j++){if(h[j].toLowerCase()==i||g[j].toLowerCase()==i){return j}}return -1};Date.getDayNumberFromName=function(g){var i=Date.CultureInfo.dayNames,h=Date.CultureInfo.abbreviatedDayNames,j=Date.CultureInfo.shortestDayNames,k=g.toLowerCase();for(var l=0;l<i.length;l++){if(i[l].toLowerCase()==k||h[l].toLowerCase()==k){return l}}return -1};Date.isLeapYear=function(b){return(((b%4===0)&&(b%100!==0))||(b%400===0))};Date.getDaysInMonth=function(d,c){return[31,(Date.isLeapYear(d)?29:28),31,30,31,30,31,31,30,31,30,31][c]};Date.getTimezoneOffset=function(d,c){return(c||false)?Date.CultureInfo.abbreviatedTimeZoneDST[d.toUpperCase()]:Date.CultureInfo.abbreviatedTimeZoneStandard[d.toUpperCase()]};Date.getTimezoneAbbreviation=function(e,g){var h=(g||false)?Date.CultureInfo.abbreviatedTimeZoneDST:Date.CultureInfo.abbreviatedTimeZoneStandard,f;for(f in h){if(h[f]===e){return f}}return null};Date.prototype.clone=function(){return new Date(this.getTime())};Date.prototype.compareTo=function(b){if(isNaN(this)){throw new Error(this)}if(b instanceof Date&&!isNaN(b)){return(this>b)?1:(this<b)?-1:0}else{throw new TypeError(b)}};Date.prototype.equals=function(b){return(this.compareTo(b)===0)};Date.prototype.between=function(f,e){var d=this.getTime();return d>=f.getTime()&&d<=e.getTime()};Date.prototype.addMilliseconds=function(b){this.setMilliseconds(this.getMilliseconds()+b);return this};Date.prototype.addSeconds=function(b){return this.addMilliseconds(b*1000)};Date.prototype.addMinutes=function(b){return this.addMilliseconds(b*60000)};Date.prototype.addHours=function(b){return this.addMilliseconds(b*3600000)};Date.prototype.addDays=function(b){return this.addMilliseconds(b*86400000)};Date.prototype.addWeeks=function(b){return this.addMilliseconds(b*604800000)};Date.prototype.addMonths=function(d){var c=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+d);this.setDate(Math.min(c,this.getDaysInMonth()));return this};Date.prototype.addYears=function(b){return this.addMonths(b*12)};Date.prototype.add=function(c){if(typeof c=="number"){this._orient=c;return this}var d=c;if(d.millisecond||d.milliseconds){this.addMilliseconds(d.millisecond||d.milliseconds)}if(d.second||d.seconds){this.addSeconds(d.second||d.seconds)}if(d.minute||d.minutes){this.addMinutes(d.minute||d.minutes)}if(d.hour||d.hours){this.addHours(d.hour||d.hours)}if(d.month||d.months){this.addMonths(d.month||d.months)}if(d.year||d.years){this.addYears(d.year||d.years)}if(d.day||d.days){this.addDays(d.day||d.days)}return this};Date._validate=function(g,h,f,e){if(typeof g!="number"){throw new TypeError(g+" is not a Number.")}else{if(g<h||g>f){throw new RangeError(g+" is not a valid value for "+e+".")}}return true};Date.validateMillisecond=function(b){return Date._validate(b,0,999,"milliseconds")};Date.validateSecond=function(b){return Date._validate(b,0,59,"seconds")};Date.validateMinute=function(b){return Date._validate(b,0,59,"minutes")};Date.validateHour=function(b){return Date._validate(b,0,23,"hours")};Date.validateDay=function(f,e,d){return Date._validate(f,1,Date.getDaysInMonth(e,d),"days")};Date.validateMonth=function(b){return Date._validate(b,0,11,"months")};Date.validateYear=function(b){return Date._validate(b,1,9999,"seconds")};Date.prototype.set=function(c){var d=c;if(!d.millisecond&&d.millisecond!==0){d.millisecond=-1}if(!d.second&&d.second!==0){d.second=-1}if(!d.minute&&d.minute!==0){d.minute=-1}if(!d.hour&&d.hour!==0){d.hour=-1}if(!d.day&&d.day!==0){d.day=-1}if(!d.month&&d.month!==0){d.month=-1}if(!d.year&&d.year!==0){d.year=-1}if(d.millisecond!=-1&&Date.validateMillisecond(d.millisecond)){this.addMilliseconds(d.millisecond-this.getMilliseconds())}if(d.second!=-1&&Date.validateSecond(d.second)){this.addSeconds(d.second-this.getSeconds())}if(d.minute!=-1&&Date.validateMinute(d.minute)){this.addMinutes(d.minute-this.getMinutes())}if(d.hour!=-1&&Date.validateHour(d.hour)){this.addHours(d.hour-this.getHours())}if(d.month!==-1&&Date.validateMonth(d.month)){this.addMonths(d.month-this.getMonth())}if(d.year!=-1&&Date.validateYear(d.year)){this.addYears(d.year-this.getFullYear())}if(d.day!=-1&&Date.validateDay(d.day,this.getFullYear(),this.getMonth())){this.addDays(d.day-this.getDate())}if(d.timezone){this.setTimezone(d.timezone)}if(d.timezoneOffset){this.setTimezoneOffset(d.timezoneOffset)}return this};Date.prototype.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this};Date.prototype.isLeapYear=function(){var b=this.getFullYear();return(((b%4===0)&&(b%100!==0))||(b%400===0))};Date.prototype.isWeekday=function(){return !(this.is().sat()||this.is().sun())};Date.prototype.getDaysInMonth=function(){return Date.getDaysInMonth(this.getFullYear(),this.getMonth())};Date.prototype.moveToFirstDayOfMonth=function(){return this.set({day:1})};Date.prototype.moveToLastDayOfMonth=function(){return this.set({day:this.getDaysInMonth()})};Date.prototype.moveToDayOfWeek=function(e,d){var f=(e-this.getDay()+7*(d||+1))%7;return this.addDays((f===0)?f+=7*(d||+1):f)};Date.prototype.moveToMonth=function(f,e){var d=(f-this.getMonth()+12*(e||+1))%12;return this.addMonths((d===0)?d+=12*(e||+1):d)};Date.prototype.getDayOfYear=function(){return Math.floor((this-new Date(this.getFullYear(),0,1))/86400000)};Date.prototype.getWeekOfYear=function(s){var l=this.getFullYear(),p=this.getMonth(),n=this.getDate();var d=s||Date.CultureInfo.firstDayOfWeek;var o=7+1-new Date(l,0,1).getDay();if(o==8){o=1}var q=((Date.UTC(l,p,n,0,0,0)-Date.UTC(l,0,1,0,0,0))/86400000)+1;var k=Math.floor((q-o+7)/7);if(k===d){l--;var m=7+1-new Date(l,0,1).getDay();if(m==2||m==8){k=53}else{k=52}}return k};Date.prototype.isDST=function(){console.log("isDST");return this.toString().match(/(E|C|M|P)(S|D)T/)[2]=="D"};Date.prototype.getTimezone=function(){return Date.getTimezoneAbbreviation(this.getUTCOffset,this.isDST())};Date.prototype.setTimezoneOffset=function(d){var e=this.getTimezoneOffset(),f=Number(d)*-6/10;this.addMinutes(f-e);return this};Date.prototype.setTimezone=function(b){return this.setTimezoneOffset(Date.getTimezoneOffset(b))};Date.prototype.getUTCOffset=function(){var c=this.getTimezoneOffset()*-10/6,d;if(c<0){d=(c-10000).toString();return d[0]+d.substr(2)}else{d=(c+10000).toString();return"+"+d.substr(1)}};Date.prototype.getDayName=function(b){return b?Date.CultureInfo.abbreviatedDayNames[this.getDay()]:Date.CultureInfo.dayNames[this.getDay()]};Date.prototype.getMonthName=function(b){return b?Date.CultureInfo.abbreviatedMonthNames[this.getMonth()]:Date.CultureInfo.monthNames[this.getMonth()]};Date.prototype._toString=Date.prototype.toString;Date.prototype.toString=function(f){var e=this;var d=function d(a){return(a.toString().length==1)?"0"+a:a};return f?f.replace(/dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?/g,function(a){switch(a){case"hh":return d(e.getHours()<13?e.getHours():(e.getHours()-12));case"h":return e.getHours()<13?e.getHours():(e.getHours()-12);case"HH":return d(e.getHours());case"H":return e.getHours();case"mm":return d(e.getMinutes());case"m":return e.getMinutes();case"ss":return d(e.getSeconds());case"s":return e.getSeconds();case"yyyy":return e.getFullYear();case"yy":return e.getFullYear().toString().substring(2,4);case"dddd":return e.getDayName();case"ddd":return e.getDayName(true);case"dd":return d(e.getDate());case"d":return e.getDate().toString();case"MMMM":return e.getMonthName();case"MMM":return e.getMonthName(true);case"MM":return d((e.getMonth()+1));case"M":return e.getMonth()+1;case"t":return e.getHours()<12?Date.CultureInfo.amDesignator.substring(0,1):Date.CultureInfo.pmDesignator.substring(0,1);case"tt":return e.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator;case"zzz":case"zz":case"z":return""}}):this._toString()};Date.today=function(){return new Date().clearTime()};Date.prototype._orient=+1;Date.prototype.next=function(){this._orient=+1;return this};Date.prototype.last=Date.prototype.prev=Date.prototype.previous=function(){this._orient=-1;return this};Date.prototype._is=false;Date.prototype.is=function(){this._is=true;return this};Number.prototype._dateElement="day";Number.prototype.fromNow=function(){var b={};b[this._dateElement]=this;return new Date().add(b)};Number.prototype.ago=function(){var b={};b[this._dateElement]=this*-1;return new Date().add(b)};(function(){var u=Date.prototype,A=Number.prototype;var i=("sunday monday tuesday wednesday thursday friday saturday").split(/\s/),j=("january february march april may june july august september october november december").split(/\s/),k=("Millisecond Second Minute Hour Day Week Month Year").split(/\s/),q;var s=function(a){return function(){if(this._is){this._is=false;return this.getDay()==a}return this.moveToDayOfWeek(a,this._orient)}};for(var v=0;v<i.length;v++){u[i[v]]=u[i[v].substring(0,3)]=s(v)}var t=function(a){return function(){if(this._is){this._is=false;return this.getMonth()===a}return this.moveToMonth(a,this._orient)}};for(var x=0;x<j.length;x++){u[j[x]]=u[j[x].substring(0,3)]=t(x)}var w=function(a){return function(){if(a.substring(a.length-1)!="s"){a+="s"}return this["add"+a](this._orient)}};var z=function(a){return function(){this._dateElement=a;return this}};for(var y=0;y<k.length;y++){q=k[y].toLowerCase();u[q]=u[q+"s"]=w(k[y]);A[q]=A[q+"s"]=z(q)}}());Date.prototype.toJSONString=function(){return this.toString("yyyy-MM-ddThh:mm:ssZ")};Date.prototype.toShortDateString=function(){return this.toString(Date.CultureInfo.formatPatterns.shortDatePattern)};Date.prototype.toLongDateString=function(){return this.toString(Date.CultureInfo.formatPatterns.longDatePattern)};Date.prototype.toShortTimeString=function(){return this.toString(Date.CultureInfo.formatPatterns.shortTimePattern)};Date.prototype.toLongTimeString=function(){return this.toString(Date.CultureInfo.formatPatterns.longTimePattern)};Date.prototype.getOrdinal=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};(function(){Date.Parsing={Exception:function(a){this.message="Parse error at '"+a.substring(0,10)+" ...'"}};var j=Date.Parsing;var p=j.Operators={rtoken:function(a){return function(c){var b=c.match(a);if(b){return([b[0],c.substring(b[0].length)])}else{throw new j.Exception(c)}}},token:function(a){return function(b){return p.rtoken(new RegExp("^s*"+b+"s*"))(b)}},stoken:function(a){return p.rtoken(new RegExp("^"+a))},until:function(a){return function(e){var d=[],b=null;while(e.length){try{b=a.call(this,e)}catch(c){d.push(b[0]);e=b[1];continue}break}return[d,e]}},many:function(a){return function(e){var b=[],d=null;while(e.length){try{d=a.call(this,e)}catch(c){return[b,e]}b.push(d[0]);e=d[1]}return[b,e]}},optional:function(a){return function(d){var c=null;try{c=a.call(this,d)}catch(b){return[null,d]}return[c[0],c[1]]}},not:function(a){return function(c){try{a.call(this,c)}catch(b){return[null,c]}throw new j.Exception(c)}},ignore:function(a){return a?function(c){var b=null;b=a.call(this,c);return[null,b[1]]}:null},product:function(){var c=arguments[0],b=Array.prototype.slice.call(arguments,1),a=[];for(var d=0;d<c.length;d++){a.push(p.each(c[d],b))}return a},cache:function(a){var c={},b=null;return function(e){try{b=c[e]=(c[e]||a.call(this,e))}catch(d){b=c[e]=d}if(b instanceof j.Exception){throw b}else{return b}}},any:function(){var a=arguments;return function(d){var c=null;for(var e=0;e<a.length;e++){if(a[e]==null){continue}try{c=(a[e].call(this,d))}catch(b){c=null}if(c){return c}}throw new j.Exception(d)}},each:function(){var a=arguments;return function(d){var f=[],c=null;for(var e=0;e<a.length;e++){if(a[e]==null){continue}try{c=(a[e].call(this,d))}catch(b){throw new j.Exception(d)}f.push(c[0]);d=c[1]}return[f,d]}},all:function(){var a=arguments,b=b;return b.each(b.optional(a))},sequence:function(c,b,a){b=b||p.rtoken(/^\s*/);a=a||null;if(c.length==1){return c[0]}return function(s){var q=null,h=null;var f=[];for(var w=0;w<c.length;w++){try{q=c[w].call(this,s)}catch(g){break}f.push(q[0]);try{h=b.call(this,q[1])}catch(d){h=null;break}s=h[1]}if(!q){throw new j.Exception(s)}if(h){throw new j.Exception(h[1])}if(a){try{q=a.call(this,q[1])}catch(e){throw new j.Exception(q[1])}}return[f,(q?q[1]:s)]}},between:function(c,b,d){d=d||c;var a=p.each(p.ignore(c),b,p.ignore(d));return function(e){var f=a.call(this,e);return[[f[0][0],r[0][2]],f[1]]}},list:function(c,b,a){b=b||p.rtoken(/^\s*/);a=a||null;return(c instanceof Array?p.each(p.product(c.slice(0,-1),p.ignore(b)),c.slice(-1),p.ignore(a)):p.each(p.many(p.each(c,p.ignore(b))),px,p.ignore(a)))},set:function(c,b,a){b=b||p.rtoken(/^\s*/);a=a||null;return function(d){var q=null,g=null,h=null,e=null,H=[[],d],f=false;for(var F=0;F<c.length;F++){h=null;g=null;q=null;f=(c.length==1);try{q=c[F].call(this,d)}catch(C){continue}e=[[q[0]],q[1]];if(q[1].length>0&&!f){try{h=b.call(this,q[1])}catch(s){f=true}}else{f=true}if(!f&&h[1].length===0){f=true}if(!f){var E=[];for(var G=0;G<c.length;G++){if(F!=G){E.push(c[G])}}g=p.set(E,b).call(this,h[1]);if(g[0].length>0){e[0]=e[0].concat(g[0]);e[1]=g[1]}}if(e[1].length<H[1].length){H=e}if(H[1].length===0){break}}if(H[0].length===0){return H}if(a){try{h=a.call(this,H[1])}catch(D){throw new j.Exception(H[1])}H[1]=h[1]}return H}},forward:function(b,a){return function(c){return b[a].call(this,c)}},replace:function(a,b){return function(d){var c=a.call(this,d);return[b,c[1]]}},process:function(a,b){return function(d){var c=a.call(this,d);return[b.call(this,c[0]),c[1]]}},min:function(b,a){return function(d){var c=a.call(this,d);if(c[0].length<b){throw new j.Exception(d)}return c}}};var k=function(a){return function(){var e=null,b=[];if(arguments.length>1){e=Array.prototype.slice.call(arguments)}else{if(arguments[0] instanceof Array){e=arguments[0]}}if(e){for(var c=0,d=e.shift();c<d.length;c++){e.unshift(d[c]);b.push(a.apply(null,e));e.shift();return b}}else{return a.apply(null,arguments)}}};var l="optional not ignore cache".split(/\s/);for(var o=0;o<l.length;o++){p[l[o]]=k(p[l[o]])}var m=function(a){return function(){if(arguments[0] instanceof Array){return a.apply(null,arguments[0])}else{return a.apply(null,arguments)}}};var n="each any all".split(/\s/);for(var i=0;i<n.length;i++){p[n[i]]=m(p[n[i]])}}());(function(){var m=function(b){var a=[];for(var c=0;c<b.length;c++){if(b[c] instanceof Array){a=a.concat(m(b[c]))}else{if(b[c]){a.push(b[c])}}}return a};Date.Grammar={};Date.Translator={hour:function(a){return function(){this.hour=Number(a)}},minute:function(a){return function(){this.minute=Number(a)}},second:function(a){return function(){this.second=Number(a)}},meridian:function(a){return function(){this.meridian=a.slice(0,1).toLowerCase()}},timezone:function(a){return function(){var b=a.replace(/[^\d\+\-]/g,"");if(b.length){this.timezoneOffset=Number(b)}else{this.timezone=a.toLowerCase()}}},day:function(b){var a=b[0];return function(){this.day=Number(a.match(/\d+/)[0])}},month:function(a){return function(){this.month=((a.length==3)?Date.getMonthNumberFromName(a):(Number(a)-1))}},year:function(a){return function(){var b=Number(a);this.year=((a.length>2)?b:(b+(((b+2000)<Date.CultureInfo.twoDigitYearMax)?2000:1900)))}},rday:function(a){return function(){switch(a){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0;this.now=true;break}}},finishExact:function(d){d=(d instanceof Array)?d:[d];var c=new Date();this.year=c.getFullYear();this.month=c.getMonth();this.day=1;this.hour=0;this.minute=0;this.second=0;for(var b=0;b<d.length;b++){if(d[b]){d[b].call(this)}}this.hour=(this.meridian=="p"&&this.hour<13)?this.hour+12:this.hour;if(this.day>Date.getDaysInMonth(this.year,this.month)){throw new RangeError(this.day+" is not a valid value for days.")}var a=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);if(this.timezone){a.set({timezone:this.timezone})}else{if(this.timezoneOffset){a.set({timezoneOffset:this.timezoneOffset})}}return a},finish:function(e){e=(e instanceof Array)?m(e):[e];if(e.length===0){return null}for(var a=0;a<e.length;a++){if(typeof e[a]=="function"){e[a].call(this)}}if(this.now){return new Date()}var d=Date.today();var f=null;var i=!!(this.days!=null||this.orient||this.operator);if(i){var h,b,c;c=((this.orient=="past"||this.operator=="subtract")?-1:1);if(this.weekday){this.unit="day";h=(Date.getDayNumberFromName(this.weekday)-d.getDay());b=7;this.days=h?((h+(c*b))%b):(c*b)}if(this.month){this.unit="month";h=(this.month-d.getMonth());b=12;this.months=h?((h+(c*b))%b):(c*b);this.month=null}if(!this.unit){this.unit="day"}if(this[this.unit+"s"]==null||this.operator!=null){if(!this.value){this.value=1}if(this.unit=="week"){this.unit="day";this.value=this.value*7}this[this.unit+"s"]=this.value*c}return d.add(this)}else{if(this.meridian&&this.hour){this.hour=(this.hour<13&&this.meridian=="p")?this.hour+12:this.hour}if(this.weekday&&!this.day){this.day=(d.addDays((Date.getDayNumberFromName(this.weekday)-d.getDay()))).getDate()}if(this.month&&!this.day){this.day=1}return d.set(this)}}};var g=Date.Parsing.Operators,n=Date.Grammar,o=Date.Translator,k;n.datePartDelimiter=g.rtoken(/^([\s\-\.\,\/\x27]+)/);n.timePartDelimiter=g.stoken(":");n.whiteSpace=g.rtoken(/^\s*/);n.generalDelimiter=g.rtoken(/^(([\s\,]|at|on)+)/);var j={};n.ctoken=function(a){var b=j[a];if(!b){var f=Date.CultureInfo.regexPatterns;var c=a.split(/\s+/),d=[];for(var e=0;e<c.length;e++){d.push(g.replace(g.rtoken(f[c[e]]),c[e]))}b=j[a]=g.any.apply(null,d)}return b};n.ctoken2=function(a){return g.rtoken(Date.CultureInfo.regexPatterns[a])};n.h=g.cache(g.process(g.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),o.hour));n.hh=g.cache(g.process(g.rtoken(/^(0[0-9]|1[0-2])/),o.hour));n.H=g.cache(g.process(g.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),o.hour));n.HH=g.cache(g.process(g.rtoken(/^([0-1][0-9]|2[0-3])/),o.hour));n.m=g.cache(g.process(g.rtoken(/^([0-5][0-9]|[0-9])/),o.minute));n.mm=g.cache(g.process(g.rtoken(/^[0-5][0-9]/),o.minute));n.s=g.cache(g.process(g.rtoken(/^([0-5][0-9]|[0-9])/),o.second));n.ss=g.cache(g.process(g.rtoken(/^[0-5][0-9]/),o.second));n.hms=g.cache(g.sequence([n.H,n.mm,n.ss],n.timePartDelimiter));n.t=g.cache(g.process(n.ctoken2("shortMeridian"),o.meridian));n.tt=g.cache(g.process(n.ctoken2("longMeridian"),o.meridian));n.z=g.cache(g.process(g.rtoken(/^(\+|\-)?\s*\d\d\d\d?/),o.timezone));n.zz=g.cache(g.process(g.rtoken(/^(\+|\-)\s*\d\d\d\d/),o.timezone));n.zzz=g.cache(g.process(n.ctoken2("timezone"),o.timezone));n.timeSuffix=g.each(g.ignore(n.whiteSpace),g.set([n.tt,n.zzz]));n.time=g.each(g.optional(g.ignore(g.stoken("T"))),n.hms,n.timeSuffix);n.d=g.cache(g.process(g.each(g.rtoken(/^([0-2]\d|3[0-1]|\d)/),g.optional(n.ctoken2("ordinalSuffix"))),o.day));n.dd=g.cache(g.process(g.each(g.rtoken(/^([0-2]\d|3[0-1])/),g.optional(n.ctoken2("ordinalSuffix"))),o.day));n.ddd=n.dddd=g.cache(g.process(n.ctoken("sun mon tue wed thu fri sat"),function(a){return function(){this.weekday=a}}));n.M=g.cache(g.process(g.rtoken(/^(1[0-2]|0\d|\d)/),o.month));n.MM=g.cache(g.process(g.rtoken(/^(1[0-2]|0\d)/),o.month));n.MMM=n.MMMM=g.cache(g.process(n.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),o.month));n.y=g.cache(g.process(g.rtoken(/^(\d\d?)/),o.year));n.yy=g.cache(g.process(g.rtoken(/^(\d\d)/),o.year));n.yyy=g.cache(g.process(g.rtoken(/^(\d\d?\d?\d?)/),o.year));n.yyyy=g.cache(g.process(g.rtoken(/^(\d\d\d\d)/),o.year));k=function(){return g.each(g.any.apply(null,arguments),g.not(n.ctoken2("timeContext")))};n.day=k(n.d,n.dd);n.month=k(n.M,n.MMM);n.year=k(n.yyyy,n.yy);n.orientation=g.process(n.ctoken("past future"),function(a){return function(){this.orient=a}});n.operator=g.process(n.ctoken("add subtract"),function(a){return function(){this.operator=a}});n.rday=g.process(n.ctoken("yesterday tomorrow today now"),o.rday);n.unit=g.process(n.ctoken("minute hour day week month year"),function(a){return function(){this.unit=a}});n.value=g.process(g.rtoken(/^\d\d?(st|nd|rd|th)?/),function(a){return function(){this.value=a.replace(/\D/g,"")}});n.expression=g.set([n.rday,n.operator,n.value,n.unit,n.orientation,n.ddd,n.MMM]);k=function(){return g.set(arguments,n.datePartDelimiter)};n.mdy=k(n.ddd,n.month,n.day,n.year);n.ymd=k(n.ddd,n.year,n.month,n.day);n.dmy=k(n.ddd,n.day,n.month,n.year);n.date=function(a){return((n[Date.CultureInfo.dateElementOrder]||n.mdy).call(this,a))};n.format=g.process(g.many(g.any(g.process(g.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(a){if(n[a]){return n[a]}else{throw Date.Parsing.Exception(a)}}),g.process(g.rtoken(/^[^dMyhHmstz]+/),function(a){return g.ignore(g.stoken(a))}))),function(a){return g.process(g.each.apply(null,a),o.finishExact)});var l={};var p=function(a){return l[a]=(l[a]||n.format(a)[0])};n.formats=function(b){if(b instanceof Array){var a=[];for(var c=0;c<b.length;c++){a.push(p(b[c]))}return g.any.apply(null,a)}else{return p(b)}};n._formats=n.formats(["yyyy-MM-ddTHH:mm:ss","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","d"]);n._start=g.process(g.set([n.date,n.time,n.expression],n.generalDelimiter,n.whiteSpace),o.finish);n.start=function(c){try{var b=n._formats.call({},c);if(b[1].length===0){return b}}catch(a){}return n._start.call({},c)}}());Date._parse=Date.parse;Date.parse=function(e){var d=null;if(!e){return null}try{d=Date.Grammar.start.call({},e)}catch(f){return null}return((d[1].length===0)?d[0]:null)};Date.getParseFunction=function(c){var d=Date.Grammar.formats(c);return function(e){var b=null;try{b=d.call({},e)}catch(a){return null}return((b[1].length===0)?b[0]:null)}};Date.parseExact=function(d,c){return Date.getParseFunction(c)(d)};(function(a){var b=function(e,g,d,f){this.name="_fpInstence_"+b.counter;b.instance[this.name]=this;b.counter++;this.method=g||"POST";this.uri=e;this.FSHelperPage="http://imgcache.qq.com/club/travel/toolpages/fp_gbk.html";this.data=(typeof(d)=="object"||typeof(d)=="string")?d:null;this.proxyURL=(typeof(f)=="string"&&f.toUpperCase()=="UTF-8")?this.FSHelperPage.replace(/_gbk/,"_utf8"):this.FSHelperPage;this._sender=null;function c(){}this.onSuccess=c;this.onError=c};b.instance={};b.counter=0;b._errCodeMap={999:{msg:"Connection or Server error"}};b.pluginsPool={formHandler:[]};b._pluginsRunner=function(e,h){var j=b,d=j.pluginsPool[e],g=h,c;if(d&&(c=d.length)){for(var f=0;f<c;++f){if(typeof(d[f])=="function"){g=d[f](g)}}}return g};b.prototype.send=function(){var d=this;if(this.method=="POST"&&this.data==null){return false}function c(h){h._sender=h._sender.callback=h._sender.errorCallback=h._sender.onreadystatechange=null;setTimeout(function(){a("#_fp_frm_"+h.name).remove()},50)}if(this._sender===null||this._sender===void (0)){var e=document.createElement("iframe");e.id="_fp_frm_"+this.name;e.style.cssText="width:0;height:0;border-width:0;display:none;";var f=navigator.userAgent;if(/MicroMessenger/i.test(f)&&/Android/i.test(f)){e.src="weixin://weixin/"}document.body.appendChild(e);e.callback=function(h){clearTimeout(g);d.onSuccess(h);c(d)};e.errorCallback=function(h){clearTimeout(g);d.onError(h);c(d)};if(typeof(e.onreadystatechange)!="undefined"){e.onreadystatechange=function(){if(d._sender.readyState=="complete"&&d._sender.submited){c(d);d.onError(b._errCodeMap[999])}}}else{var g=setTimeout(function(){try{var i=d._sender.contentWindow.location.href;if(i.indexOf(d.uri)==0){clearTimeout(g);c(d);d.onError(b._errCodeMap[999])}}catch(h){clearTimeout(g);c(d);d.onError(b._errCodeMap[999])}},200)}this._sender=e}this._sender.src=this.proxyURL;return true};b.prototype.destroy=function(){var c=this.name;delete b.instance[c]._sender;b.instance[c]._sender=null;delete b.instance[c];b.counter--;return null};a.postForm=function(d,f){var e={url:"",method:"post",data:null,charset:"gbk",success:function(){},error:function(){}};a.extend(e,d);var c=new b(e.url,e.method,e.data,e.charset);c.onSuccess=e.success;c.onError=e.error;c.send()};a.postForm.instance=b.instance})(window.Zepto||window.jQuery);(function(a){var b=function(){this.loaded=false;this.onload=function(){};this.onerror=function(){}};b.scriptId=1;b.prototype.load=function(f,d,g){var c=b.scriptId;b.scriptId++;var e=this;setTimeout(function(){e._load2.apply(e,[c,f,d,g]);e=null},0)};b.prototype._load2=function(g,c,k,h){var m=this;var d=k||document;h=h||"utf-8";var e=navigator.userAgent;var i=e.match(/MSIE/);var j=d.createElement("script");var l=a(j);var f=i?"readystatechange":"load";l.on(f,function(o){var n=a(this);if(i){if(j&&!(j.readyState=="complete"||j.readyState=="loaded")){return}}m.onload();n.remove();j=null});if(!i){l.on("error",function(o){var n=a(this);m.onerror();n.remove();j=null})}j.id="js_"+g;j.async=true;j.charset=h;j.src=c;d.getElementsByTagName("head")[0].appendChild(j)};a.jsLoader=function(c,f){var d={url:"",charset:"utf-8",success:function(){},error:function(){}};a.extend(d,c);var e=new b();e.onload=d.success;e.onerror=d.error;e.load(d.url,document,d.charset)}})(window.Zepto||window.jQuery);(function(a){a.cookie=function(g,f,k){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(f))||f===null||f===undefined)){k=a.extend({},k);if(f===null||f===undefined){k.expires=-1}if(typeof k.expires==="number"){var h=k.expires,j=k.expires=new Date();j.setDate(j.getDate()+h)}f=String(f);return(document.cookie=[encodeURIComponent(g),"=",k.raw?f:encodeURIComponent(f),k.expires?"; expires="+k.expires.toUTCString():"",k.path?"; path="+k.path:"",k.domain?"; domain="+k.domain:"",k.secure?"; secure":""].join(""))}k=f||{};var b=k.raw?function(i){return i}:decodeURIComponent;var c=document.cookie.split("; ");for(var e=0,d;d=c[e]&&c[e].split("=");e++){if(b(d[0])===g){return b(d[1]||"")}}return null}})(window.Zepto||window.jQuery);(function(a){window.Naroto=window.Naroto||{};Naroto.trim=function(b){return a.trim(b)};Naroto.jsonGetter=function(i){var f=i.url;if(typeof i.callback!="function"){return}var e={};if(typeof i.data=="object"){e=i.data}if(i.data&&typeof i.data["tk"]=="undefined"){e.tk=Naroto.security.getAntiCSRFToken()}var c="_t";while(i[c]||window[c]){c+=Math.round(Math.random()*1000000)}var h=i.sendCB||c;e.callback=h;e[c]=Math.round(Math.random()*1000000);var b=f+a.param(e);if(f.indexOf("?")!="-1"){b=f+"&"+a.param(e)}else{b=f+"?"+a.param(e)}var d={url:b,charset:"utf-8"};for(var g in i){if(g!="url"){d[g]=i[g]}}window[h]=function(k){var j={ret:0,msg:"请求成功返回",data:k};i.callback(j)};d.error=function(){var j={ret:-1,msg:"请求出错"};i.callback(j)};a.jsLoader(d)};Naroto.jsonPoster=function(f){var b=f.url;if(typeof f.callback!="function"){return}var e={};var g=b.indexOf("?");if(g!="-1"){e=Naroto.splitHttpParamString(b.substr(g+1));b=b.substr(0,g)}if(typeof f.data=="string"){f.data=Naroto.splitHttpParamString(f.data)}if(typeof f.data=="object"){for(var c in f.data){e[c]=f.data[c]}}if(typeof f.tk=="undefined"){e.tk=Naroto.security.getAntiCSRFToken()}var d={url:b,method:"post",data:e,charset:"utf-8",success:function(i){var h={ret:0,msg:"请求成功返回",data:i};f.callback(h)},error:function(){var h={ret:-1,msg:"请求出错"};f.callback(h)}};a.postForm(d)};Naroto.commonDictionarySplit=function(k,c,b){if(typeof(c)=="undefined"){c="&"}if(typeof(b)=="undefined"){b=""}var g=new RegExp("^"+b+"|"+b+"$","g");if(typeof k=="string"){var d=k.split(b+c),e,j={};for(var f=0,h=d.length;f<h;f++){e=d[f].split("=");if(e.length>1){j[e[0]]=(e.slice(1).join("=")).replace(g,"")}else{j[d[f]]=true}}return j}else{return{}}};Naroto.splitHttpParamString=function(b){return Naroto.commonDictionarySplit(b,"&")};Naroto.renderTemplate=function(g,f,c){if(!g||!c||!f){return}var d=a("#"+g).html();var f=f;var b=a("#"+c);if(!d||b.length<1){return}var e=Naroto.Template(d).render(f);b.html(e)};Naroto.inputVal=function(d){var b=a("#"+d);var c=a.trim(b.val());b.val(c);return c};Naroto.getHashes=function(c){var b=Naroto.splitHttpParamString(location.hash.substr(1));if(!c){var d=Naroto.splitHttpParamString(window.location.search.substr(1));a.extend(b,d)}return b};Naroto.localStorage=(function(){var c=["PodInn","Hotel"];var e=function(h,f,g){if(a.inArray(h,c)!=-1){var i=h+"_"+f;localStorage.setItem(i,g)}};var d=function(g,f){if(a.inArray(g,c)!=-1){var h=g+"_"+f;return localStorage.getItem(h)}else{return null}};var b=function(g,f){if(a.inArray(g,c)!=-1){var h=g+"_"+f;return localStorage.removeItem(h)}else{return null}};return{setItem:e,getItem:d,removeItem:b}}());Naroto.escapeHTML=function(c){var d=document.createElement("div");var b=document.createTextNode(c);d.appendChild(b);return d.innerHTML};Naroto.unescapeHTML=function(b){var c=document.createElement("div");c.innerHTML=b.replace(/<\/?[^>]+>/gi,"");return c.childNodes[0]?c.childNodes[0].nodeValue:""};Naroto.getLimitedLength=function(d,c){d+="";var b;if(c<1){b=d}else{if(c==1){b=d.substr(0,1)}else{if(c==2){b=d.substr(0,2)}else{if(d.length>c){b=d.substr(0,c-2)+".."}else{b=d}}}}return b};Naroto.parseJson=function(b){if(b===null){return null}else{return JSON.parse(b)}};Naroto.jumpToAnchor=function(c,b){var f=a("#"+c).offset();if(b&&parseInt(b)){b=parseInt(b)}else{b=-30}var e=f.top+b;var d=document.body||document.documentElement;if(d){d.scrollTop=e}};Naroto.pgvClick=function(b){if(b!=""&&typeof pgvSendClick=="function"){pgvSendClick({hottag:b,statIframe:Naroto.gInIframe||false})}setTimeout(function(){},10)}})(window.Zepto||window.jQuery);var class2type={};window.Naroto=window.Naroto||{};Naroto.guid=0;Naroto.type=function(a){return a==null?String(a):class2type[Object.prototype.toString.call(a)]||"object"};Naroto.each=function(b,f,e){if(b){var d,h,c=0,g=b&&b.length,a=g===undefined||(typeof(b)==="function");e=e||null;if(a){for(d in b){if(f.call(e,b[d],d,b)===false){break}}}else{for(h=b[0];c<g&&f.call(e,h,c,b)!==false;h=b[++c]){}}}return b};Naroto.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){class2type["[object "+a+"]"]=(b=a.toLowerCase());Naroto["is"+a]=function(c){return Naroto.type(c)==b}});var Naroto=Naroto||{};(function(a){Naroto.Dialog=function(){this.msg="";this.type=Naroto.Dialog.ALERT;this.confirmText="";this.cancelText="";this.showClose=false;this.options=null;this.duration=1000;this.onClose=null;this.onConfirm=null;this.onCancel=null;this.onSelect=null;this.noMask=false;this._$container=null;this._$dialog=null;this._$pageBody=a("body");this._$mask=null;this._hasRemoved=false};Naroto.Dialog.ALERT=1;Naroto.Dialog.CONFIRM=2;Naroto.Dialog.SELECT=3;Naroto.Dialog.SUCCESS=4;Naroto.Dialog.FAILED=5;Naroto.Dialog.LOADING=6;Naroto.Dialog.prototype.alert=function(d,b){var c={};c.msg=d||" ";c.type=Naroto.Dialog.ALERT;c.confirmText=b||"确&nbsp;&nbsp;定";return this.show(c)};Naroto.Dialog.prototype.confirm=function(e,c,b){var d={};d.msg=e||" ";d.type=Naroto.Dialog.CONFIRM;d.confirmText=c||"确&nbsp;&nbsp;定";d.cancelText=b||"取&nbsp;&nbsp;消";return this.show(d)};Naroto.Dialog.prototype.select=function(b){var c={};c.options=b||null;c.type=Naroto.Dialog.SELECT;c.showClose=true;return this.show(c)};Naroto.Dialog.prototype.success=function(d,b){var c={};c.msg=d||" ";c.type=Naroto.Dialog.SUCCESS;c.noMask=true;c.duration=parseInt(b)>0?parseInt(b):this.duration;return this.show(c)};Naroto.Dialog.prototype.failed=function(d,b){var c={};c.msg=d||" ";c.type=Naroto.Dialog.FAILED;c.noMask=true;c.duration=parseInt(b)>0?parseInt(b):this.duration;return this.show(c)};Naroto.Dialog.prototype.loading=function(c){var b={};b.msg=c||" ";b.type=Naroto.Dialog.LOADING;return this.show(b)};Naroto.Dialog.prototype.show=function(s){this.remove();var h=["msg","type","confirmText","cancelText","showClose","options","onClose","onConfirm","onCancel","onSelect","noMask","duration"];for(var o=0,p=h.length;o<p;o++){var u=h[o];if(s[u]){this[u]=s[u]}}this._hasRemoved=false;this.showMask();this._$container=a('    <div class="mod_pop">        <div class="mod_pop_wrap">      <div class="pop_bg">      </div>        </div>    </div>');var m={};m.top=0;m.left=0;m.width="100%";this._$container.css(m);this._$dialog=this._$container.find(".mod_pop_wrap");this._$dialog.css({width:"230px"});var g=this._$dialog.find(".pop_bg");var j=this;if(this.type==Naroto.Dialog.SUCCESS){var l=a('<div class="pop_icon"><img src="http://wxj.weixinjia.net/image/mobile/hotel/icon_succ.png" width="61" height="52"></div>');l.appendTo(g)}if(this.type==Naroto.Dialog.FAILED){var l=a('<div class="pop_icon"><img src="http://wxj.weixinjia.net/image/mobile/hotel/icon_fail.png" width="18" height="61"></div>');l.appendTo(g)}if(this.type==Naroto.Dialog.ALERT||this.type==Naroto.Dialog.CONFIRM||this.type==Naroto.Dialog.SUCCESS||this.type==Naroto.Dialog.FAILED||this.type==Naroto.Dialog.LOADING){var k=a('<div class="pop_info"><div class="import_info">'+this.msg+"</div></div>");k.appendTo(g)}if(this.type==Naroto.Dialog.SELECT){g.addClass("pop_select");var f=a("<ul></ul>");for(var t in this.options){var e=a("<li></li>");var c=a('<a href="javascript:;" data-key="'+t+'">'+this.options[t]+"</a>");e.appendTo(f);c.appendTo(e);c.on("click",function(){var i=a(this);i.addClass("current");if(a.isFunction(j.onSelect)){j.onSelect(i.data("key"))}j.remove();return false})}f.prependTo(g)}if(this.showClose){g.addClass("pop_select");var b=a('<div class="icon_close"></div>');b.appendTo(g);var c=a('<a href="javascript:;"><img src="http://wxj.weixinjia.net/image/mobile/hotel/icon_close.png" width="10" height="10"></a>');c.appendTo(b);c.on("click",function(){var i=a(this);if(a.isFunction(j.onClose)){j.onClose()}j.remove();return false})}if(this.type==Naroto.Dialog.ALERT||this.type==Naroto.Dialog.CONFIRM){var n=a('<div class="pop_btn"></div>');if(this.confirmText){var q=a('<input class="pop_submit" type="button" value="'+this.confirmText+'" />');q.appendTo(n);q.on("click",function(){if(a.isFunction(j.onConfirm)){j.onConfirm()}j.remove();return false})}if(this.cancelText){var d=a('<input class="pop_reset" type="button" value="'+this.cancelText+'" />');d.appendTo(n);d.on("click",function(){if(a.isFunction(j.onCancel)){j.onCancel()}j.remove();return false})}n.appendTo(g)}this._$container.appendTo(this._$pageBody);this.setPosition();a(window).on("resize",function(){j.resizeMask();j.setPosition()}).focus();if(this.type==Naroto.Dialog.SUCCESS||this.type==Naroto.Dialog.FAILED){window.setTimeout(function(){j.animateRemove()},this.duration)}return this};Naroto.Dialog.prototype.showMask=function(){if(this.noMask){return}this._$mask=a('<div class="mod_pop_mask"></div>');this.resizeMask();this._$mask.appendTo(this._$pageBody)};Naroto.Dialog.prototype.resizeMask=function(){if(this._hasRemoved){return}var e=document;var d=Math.max(e.documentElement.scrollWidth,e.body.scrollWidth);var b=Math.max(e.documentElement.scrollHeight,e.body.scrollHeight);var c=(e.compatMode=="CSS1Compat")?e.documentElement.clientHeight:e.body.clientHeight;b=Math.max(b,c);this._$mask.css({width:d+"px",height:b+"px"})};Naroto.Dialog.prototype.setStyle=function(b){this._$dialog.css(b)};Naroto.Dialog.prototype.remove=function(){if(this._$mask){this._$mask.remove();this._$mask=null}if(this._$container){this._$container.remove();this._$container=null}this._hasRemoved=true};Naroto.Dialog.prototype.animateRemove=function(){var b=this;this._$dialog.animate({opacity:0},{duration:500,complete:function(){b.remove()}})};Naroto.Dialog.prototype.setPosition=function(){if(this._hasRemoved){return}var g=this._$dialog.width();var b=this._$dialog.height();var f=document;var c=(f.compatMode=="CSS1Compat")?f.documentElement.clientWidth:f.body.clientWidth;var e=(f.compatMode=="CSS1Compat")?f.documentElement.clientHeight:f.body.clientHeight;var d={};d.position="absolute";d.top=parseInt((e-b)*0.191);d.left=parseInt((c-g)/2)+"px";this._$dialog.css(d)};Naroto.Dialog.alert=function(b){return new Naroto.Dialog().alert(b)};Naroto.Dialog.success=function(c,b){return new Naroto.Dialog().success(c,b)};Naroto.Dialog.failed=function(c,b){return new Naroto.Dialog().failed(c,b)}})(window.Zepto||window.jQuery);var Naroto=Naroto||{};Naroto.Checker=Naroto.Checker||{};Naroto.Checker.isEmail=function(b){var a=/^([a-z0-9])+(([a-z0-9])+[\.]?[_]?)*@(([a-z0-9])+[\.]){1,2}[a-z]{2,3}$/i;return a.test(b)};Naroto.Checker.isMobile=function(b){var a=/^1\d{10}$/;return a.test(b)};Naroto.Checker.isTel=function(b){var a=/^(0\d{2,3}-)?\d{5,8}(-\d{1,5})?$/;return a.test(b)};Naroto.Checker.isNormalName=function(b){if(b.length<2){return false}var a=/^[^'"&_<>\\\n\s\t]+$/;return a.test(b)};Naroto.Checker.isZipCode=function(b){var a=/^\d{6}$/;return a.test(b)};Naroto.Checker.isStreet=function(b){var a=/^[\u4e00-\u9fa5][\u4e00-\u9fa5\d\w\-#\(\) （）]+$/;return a.test(b)};(function(a){Naroto.gInQQIframe=false;try{Naroto.gInQQIframe=window.top!=window.self}catch(b){}Naroto.gInIframe=false;try{if(window.top.location.host){}else{throw"iframeException"}}catch(b){Naroto.gInIframe=true}})(window.Zepto||window.jQuery);