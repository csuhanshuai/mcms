var WeixinApi=(function(){function k(n,l){l=l||{};var m=function(o){WeixinJSBridge.invoke("shareTimeline",{appid:o.appId?o.appId:"",img_url:o.imgUrl,link:o.link,desc:o.title,title:o.desc,img_width:"120",img_height:"120"},function(p){switch(p.err_msg){case"share_timeline:cancel":l.cancel&&l.cancel(p);break;case"share_timeline:fail":l.fail&&l.fail(p);break;case"share_timeline:confirm":case"share_timeline:ok":l.confirm&&l.confirm(p);break}l.all&&l.all(p)})};WeixinJSBridge.on("menu:share:timeline",function(o){if(l.async&&l.ready){window._wx_loadedCb_=l.dataLoaded||new Function();if(window._wx_loadedCb_.toString().indexOf("_wx_loadedCb_")>0){window._wx_loadedCb_=new Function()}l.dataLoaded=function(p){window._wx_loadedCb_(p);m(p)};l.ready&&l.ready(o)}else{l.ready&&l.ready(o);m(n)}})}function j(n,m){m=m||{};var l=function(o){WeixinJSBridge.invoke("sendAppMessage",{appid:o.appId?o.appId:"",img_url:o.imgUrl,link:o.link,desc:o.desc,title:o.title,img_width:"120",img_height:"120"},function(p){switch(p.err_msg){case"send_app_msg:cancel":m.cancel&&m.cancel(p);break;case"send_app_msg:fail":m.fail&&m.fail(p);break;case"send_app_msg:confirm":case"send_app_msg:ok":m.confirm&&m.confirm(p);break}m.all&&m.all(p)})};WeixinJSBridge.on("menu:share:appmessage",function(o){if(m.async&&m.ready){window._wx_loadedCb_=m.dataLoaded||new Function();if(window._wx_loadedCb_.toString().indexOf("_wx_loadedCb_")>0){window._wx_loadedCb_=new Function()}m.dataLoaded=function(p){window._wx_loadedCb_(p);l(p)};m.ready&&m.ready(o)}else{m.ready&&m.ready(o);l(n)}})}function b(n,l){l=l||{};var m=function(o){WeixinJSBridge.invoke("shareWeibo",{content:o.desc,link:o.link},function(p){switch(p.err_msg){case"share_weibo:cancel":l.cancel&&l.cancel(p);break;case"share_weibo:fail":l.fail&&l.fail(p);break;case"share_weibo:confirm":case"share_weibo:ok":l.confirm&&l.confirm(p);break}l.all&&l.all(p)})};WeixinJSBridge.on("menu:share:weibo",function(o){if(l.async&&l.ready){window._wx_loadedCb_=l.dataLoaded||new Function();if(window._wx_loadedCb_.toString().indexOf("_wx_loadedCb_")>0){window._wx_loadedCb_=new Function()}l.dataLoaded=function(p){window._wx_loadedCb_(p);m(p)};l.ready&&l.ready(o)}else{l.ready&&l.ready(o);m(n)}})}function c(l,m){if(!l||!m||m.length==0){return}WeixinJSBridge.invoke("imagePreview",{current:l,urls:m})}function g(){WeixinJSBridge.call("showOptionMenu")}function i(){WeixinJSBridge.call("hideOptionMenu")}function a(){WeixinJSBridge.call("showToolbar")}function d(){WeixinJSBridge.call("hideToolbar")}function e(l){if(l&&typeof l=="function"){WeixinJSBridge.invoke("getNetworkType",{},function(m){l(m.err_msg)})}}function f(){WeixinJSBridge.call("closeWindow")}function h(n){if(n&&typeof n=="function"){var m=this;var l=function(){n(m)};if(typeof window.WeixinJSBridge=="undefined"){if(document.addEventListener){document.addEventListener("WeixinJSBridgeReady",l,false)}else{if(document.attachEvent){document.attachEvent("WeixinJSBridgeReady",l);document.attachEvent("onWeixinJSBridgeReady",l)}}}else{l()}}}return{version:"1.7",ready:h,shareToTimeline:k,shareToWeibo:b,shareToFriend:j,showOptionMenu:g,hideOptionMenu:i,showToolbar:a,hideToolbar:d,getNetworkType:e,imagePreview:c,closeWindow:f}})();